<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script src="mask.js"></script>
	<title>Document</title>
	<script type="text/javascript">

	//if (window.addEventListener) window.addEventListener("load", init, false);
	//else if (window.attachEvent) window.attachEvent("onload", init);


	$(document).ready(function(){
		$('#my-phone').mask('+38 (___) ___-__-__');
	});

	var myname = "myname";
	var myage = "myage";
	var myemail = "my-email";
	var myphone = "my-phone";

		window.onload = function (){

			document.getElementById(myname).onchange = patternName;
			document.getElementById(myage).onchange = patternAge;
			document.getElementById(myemail).onchange = patternEmail;
			document.getElementById(myphone).onchange = patternPhone;
			
			function validate(elem, pattern) {
			    var res = elem.value.search(pattern);
			    if (res == -1) elem.classList.add("error"); 
			    else elem.classList.add("submit");
			}

			function patternName () {
				var pattern = /^[a-zA-Zа-яА-Я'][a-zA-Zа-яА-Я']+[a-zA-Zа-яА-Я']?$/;
				validate(this,pattern);
			}

			function patternAge () {
				var pattern = /^\d{1,3}$/;
				validate(this,pattern);
			}

			function patternEmail () {
				var pattern = /^[a-z0-9]+[-._a-z0-9]+@[a-z0-9][-a-z0-9]+\.+[a-z]{2,6}$/;
				validate(this,pattern);
			}

			function patternPhone () {
				var pattern;///^+38 \([0-9]{3}\)\s[0-9]{3}-[0-9]{2}-[0-9]{2}$/;
				validate(this,pattern);
			}


			function onsubmiHandler() {

			    var invalid = false;

			    for (var i = 0; i < form_validation.elements.length; ++i) {
			        var e = form_validation.elements[i];
			        if (e.onchange) {
			            if (e.className == "error") invalid = true;
			        }
			    }

			    if (invalid) {
			        alert("Допущены ошибки при заполнении формы.");
			        return false;
			    }
			}

		}

			
	</script>
	<style>
		.error {border: 1px solid red;}
		.submit {border: 1px solid green;}
	</style>
</head>
<body>
	<form name="form_validation">
		<table>
	      <tr>
	        <td>Name</td>
	        <td>
	          <input type="text" id="myname">
	        </td>
	      </tr>

	      <tr>
	        <td>Age</td>
	        <td>
	          <input type="text" id="myage">
	        </td>
	      </tr>

	      <tr>
	        <td>Email</td>
	        <td>
	          <input type="email" id="my-email">
	        </td>
	      </tr>

	      <tr>
	        <td>Telephone</td>
	        <td>
	          <input type="text" id="my-phone">
	        </td>
	      </tr>	
	   	</table>
	</form>
</body>
</html>